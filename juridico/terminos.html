<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Términos - Agenda Legal</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Sidebar de navegación -->
    <div class="sidebar">
        <div class="sidebar-header">
            <i class="fas fa-gavel fa-2x"></i>
            <h2>Agenda Legal</h2>
        </div>
        <div class="sidebar-nav">
            <a href="dashboard.html" class="nav-item">
                <i class="fas fa-chart-bar"></i>
                <span>Dashboard</span>
            </a>
            <a href="audiencias.html" class="nav-item">
                <i class="fas fa-gavel"></i>
                <span>Audiencias</span>
            </a>
            <a href="terminos.html" class="nav-item active">
                <i class="fas fa-clock"></i>
                <span>Términos</span>
            </a>
              <a href="asuntos.html" class="nav-item">
                <i class="fas fa-folder"></i>
                <span>Asuntos</span>
            </a> 
            <a href="agenda-general.html" class="nav-item">
                <i class="fas fa-calendar-alt"></i>
                <span>Agenda General</span>
            </a>

        </div>
        
        
    </div>
    
    <!-- Contenido principal -->
    <div class="main-content">
        <div class="container">
            <header>
                <div class="header-content">
                    <h1><i class="fas fa-clock"></i> Términos - Agenda Legal</h1>
                    <div class="user-info">
                        <i class="fas fa-user-circle"></i> Usuario Abogado
                    </div>
                </div>
            </header>
            
            <!-- Tabla de Términos -->
            <div class="tab-content active" id="terminos">
                <div class="toolbar">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="search-terminos" placeholder="Buscar en términos...">
                    </div>
                    <button class="btn btn-primary" id="add-termino">
                        <i class="fas fa-plus"></i> Nuevo Término
                    </button>
                </div>
                
                <!-- Filtros para términos -->
                <div class="filters">
                    <div class="filters-title">
                        <i class="fas fa-filter"></i> Filtros de Términos
                    </div>
                    <div class="filter-row">
                        <div class="filter-group">
                            <label for="filter-tribunal-termino">Tribunal</label>
                            <select id="filter-tribunal-termino">
                                <option value="">Todos los tribunales</option>
                                <option value="Primero">Primer Tribunal</option>
                                <option value="Segundo">Segundo Tribunal</option>
                                <option value="Tercero">Tercer Tribunal</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label for="filter-estado-termino">Gerencias</label>
                            <select id="filter-estado-termino">
                                <option value="">Todos los estados</option>
                                <option value="Aguascalientes">Aguascalientes</option>
                                <option value="Baja California">Baja California</option>
                                <option value="Baja California Sur">Baja California Sur</option>
                                <option value="Campeche">Campeche</option>
                                <option value="Chiapas">Chiapas</option>
                                <option value="Chihuahua">Chihuahua</option>
                                <option value="Ciudad de México">Ciudad de México</option>
                                <option value="Coahuila">Coahuila</option>
                                <option value="Colima">Colima</option>
                                <option value="Durango">Durango</option>
                                <option value="Estado de México">Estado de México</option>
                                <option value="Guanajuato">Guanajuato</option>
                                <option value="Guerrero">Guerrero</option>
                                <option value="Hidalgo">Hidalgo</option>
                                <option value="Jalisco">Jalisco</option>
                                <option value="Michoacán">Michoacán</option>
                                <option value="Morelos">Morelos</option>
                                <option value="Nayarit">Nayarit</option>
                                <option value="Nuevo León">Nuevo León</option>
                                <option value="Oaxaca">Oaxaca</option>
                                <option value="Puebla">Puebla</option>
                                <option value="Querétaro">Querétaro</option>
                                <option value="Quintana Roo">Quintana Roo</option>
                                <option value="San Luis Potosí">San Luis Potosí</option>
                                <option value="Sinaloa">Sinaloa</option>
                                <option value="Sonora">Sonora</option>
                                <option value="Tabasco">Tabasco</option>
                                <option value="Tamaulipas">Tamaulipas</option>
                                <option value="Tlaxcala">Tlaxcala</option>
                                <option value="Veracruz">Veracruz</option>
                                <option value="Yucatán">Yucatán</option>
                                <option value="Zacatecas">Zacatecas</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label for="filter-estatus-termino">Estatus</label>
                            <select id="filter-estatus-termino">
                                <option value="">Todos los estatus</option>
                                <option value="Proyectista">Proyectista</option>
                                <option value="Liberado">Liberado</option>
                                <option value="Revisión">Revisión</option>
                                <option value="Presentado">Presentado</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label for="filter-prioridad-termino">Prioridad</label>
                            <select id="filter-prioridad-termino">
                                <option value="">Todas las prioridades</option>
                                <option value="Alta">Alta</option>
                                <option value="Media">Media</option>
                                <option value="Baja">Baja</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="table-container">
                    <table id="tabla-terminos">
                        <thead>
                            <tr>
                                <th>F. Ingreso</th>
                                <th>F. Vencimiento</th>
                                <th>Expediente</th>
                                <th>Actor/Quejoso</th>
                                <th>Asunto</th>
                                <th>Prestación</th>
                                <th>Abogado</th>
                                <th>Acuse</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="terminos-body">
                            <!-- Los datos se cargarán dinámicamente -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Scripts -->
    <script src="js/terminos.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof initTerminos === 'function') {
                initTerminos();
            }
        });
    </script>
    <!-- Modal para Términos -->
    <div class="modal" id="modal-termino">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-termino-title">Nuevo Término</h2>
                <button class="btn btn-danger" id="close-modal-termino">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="form-termino">
                    <input type="hidden" id="termino-id">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="termino-fecha-ingreso">F. Ingreso</label>
                            <input type="date" id="termino-fecha-ingreso" required>
                        </div>
                        <div class="form-group">
                            <label for="termino-fecha-vencimiento">F. Vencimiento</label>
                            <input type="date" id="termino-fecha-vencimiento" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="termino-expediente">Expediente</label>
                            <input type="text" id="termino-expediente" required>
                        </div>
                        <div class="form-group">
                            <label for="termino-actor">Actor/Quejoso</label>
                            <input type="text" id="termino-actor" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="termino-asunto">Asunto</label>
                            <input type="text" id="termino-asunto" required>
                        </div>
                        <div class="form-group">
                            <label for="termino-prestacion">Prestación</label>
                            <input type="text" id="termino-prestacion" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="termino-tribunal">Tribunal</label>
                            <input type="text" id="termino-tribunal" required>
                        </div>
                        <div class="form-group">
                            <label for="termino-abogado">Abogado</label>
                            <input type="text" id="termino-abogado" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="termino-estado">Estado</label>
                            <select id="termino-estado" required>
                                <option value="">Seleccione un estado</option>
                                <option value="Ciudad de México">Ciudad de México</option>
                                <option value="Jalisco">Jalisco</option>
                                <option value="Nuevo León">Nuevo León</option>
                                <option value="Estado de México">Estado de México</option>
                                <option value="Puebla">Puebla</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="termino-prioridad">Prioridad</label>
                            <select id="termino-prioridad" required>
                                <option value="">Seleccione prioridad</option>
                                <option value="Alta">Alta</option>
                                <option value="Media">Media</option>
                                <option value="Baja">Baja</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="termino-estatus">Estatus</label>
                        <select id="termino-estatus" required>
                            <option value="">Seleccione estatus</option>
                            <option value="Proyectista">Proyectista</option>
                            <option value="Liberado">Liberado</option>
                            <option value="Revisión">Revisión</option>
                            <option value="Presentado">Presentado</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="termino-observaciones">Observaciones</label>
                        <textarea id="termino-observaciones" rows="3"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-danger" id="cancel-termino">Cancelar</button>
                <button class="btn btn-success" id="save-termino">Guardar Término</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/terminos.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof initTerminos === 'function') {
                initTerminos();
            }
            initModalTerminos();
        });

        function initModalTerminos() {
            // Modal de términos
            const modalTermino = document.getElementById('modal-termino');
            const btnAddTermino = document.getElementById('add-termino');
            const btnCloseTermino = document.getElementById('close-modal-termino');
            const btnCancelTermino = document.getElementById('cancel-termino');
            const btnSaveTermino = document.getElementById('save-termino');

            // Abrir modal
            if (btnAddTermino) {
                btnAddTermino.addEventListener('click', function() {
                    openTerminoModal();
                });
            }

            // Cerrar modal
            if (btnCloseTermino) {
                btnCloseTermino.addEventListener('click', function() {
                    modalTermino.style.display = 'none';
                });
            }

            if (btnCancelTermino) {
                btnCancelTermino.addEventListener('click', function() {
                    modalTermino.style.display = 'none';
                });
            }

            // Guardar término
            if (btnSaveTermino) {
                btnSaveTermino.addEventListener('click', function() {
                    saveTermino();
                });
            }

            // Cerrar modal al hacer clic fuera
            window.addEventListener('click', function(event) {
                if (event.target === modalTermino) {
                    modalTermino.style.display = 'none';
                }
            });
        }

        function openTerminoModal(termino = null) {
            const modal = document.getElementById('modal-termino');
            const title = document.getElementById('modal-termino-title');
            const form = document.getElementById('form-termino');
            
            if (termino) {
                title.textContent = 'Editar Término';
                document.getElementById('termino-id').value = termino.id;
                document.getElementById('termino-fecha-ingreso').value = termino.fechaIngreso;
                document.getElementById('termino-fecha-vencimiento').value = termino.fechaVencimiento;
                document.getElementById('termino-expediente').value = termino.expediente;
                document.getElementById('termino-actor').value = termino.actor;
                document.getElementById('termino-asunto').value = termino.asunto;
                document.getElementById('termino-prestacion').value = termino.prestacion;
                document.getElementById('termino-tribunal').value = termino.tribunal;
                document.getElementById('termino-abogado').value = termino.abogado;
                document.getElementById('termino-estado').value = termino.estado;
                document.getElementById('termino-prioridad').value = termino.prioridad;
                document.getElementById('termino-estatus').value = termino.estatus;
                document.getElementById('termino-observaciones').value = termino.observaciones;
            } else {
                title.textContent = 'Nuevo Término';
                if (form) form.reset();
                document.getElementById('termino-id').value = '';
                
                // Establecer fecha de hoy como predeterminada
                const today = new Date().toISOString().split('T')[0];
                document.getElementById('termino-fecha-ingreso').value = today;
                
                // Establecer vencimiento en 15 días
                const vencimiento = new Date();
                vencimiento.setDate(vencimiento.getDate() + 15);
                document.getElementById('termino-fecha-vencimiento').value = vencimiento.toISOString().split('T')[0];
            }
            
            modal.style.display = 'flex';
        }

        function saveTermino() {
            const id = document.getElementById('termino-id').value;
            const fechaIngreso = document.getElementById('termino-fecha-ingreso').value;
            const fechaVencimiento = document.getElementById('termino-fecha-vencimiento').value;
            const expediente = document.getElementById('termino-expediente').value;
            const actor = document.getElementById('termino-actor').value;
            const asunto = document.getElementById('termino-asunto').value;
            const prestacion = document.getElementById('termino-prestacion').value;
            const tribunal = document.getElementById('termino-tribunal').value;
            const abogado = document.getElementById('termino-abogado').value;
            const estado = document.getElementById('termino-estado').value;
            const prioridad = document.getElementById('termino-prioridad').value;
            const estatus = document.getElementById('termino-estatus').value;
            const observaciones = document.getElementById('termino-observaciones').value;
            
            if (!fechaIngreso || !fechaVencimiento || !expediente || !actor || !asunto || !prestacion || !tribunal || !abogado || !estado || !prioridad || !estatus) {
                alert('Por favor, complete todos los campos obligatorios');
                return;
            }
            
            alert('Término guardado correctamente:\n' +
                  'Expediente: ' + expediente + '\n' +
                  'Actor: ' + actor + '\n' +
                  'Asunto: ' + asunto + '\n' +
                  'Vencimiento: ' + fechaVencimiento);
            
            // Cerrar modal
            document.getElementById('modal-termino').style.display = 'none';
            
            // Aquí podrías recargar la tabla o agregar el nuevo término
        }
    </script>
</body>
</html>